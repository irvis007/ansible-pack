---
# Neovim & AstroNvim Installation - Main Orchestrator
# This file orchestrates the installation process using modular task files

# ============================================================================
# Step 1: Node.js Setup (Required for language servers and npm packages)
# ============================================================================
- name: "[nvim] Setup Node.js environment"
  import_tasks: setup-debian.yml
  tags: ['nvim', 'nodejs']

- name: "[nvim] Configure Node.js and npm"
  import_tasks: nodejs.yml
  tags: ['nvim', 'nodejs']

# ============================================================================
# Step 2: Backup Existing Configuration (Optional)
# ============================================================================
- name: "[nvim] Backup existing Neovim configuration"
  include_tasks: backup.yml
  when: nvim_backup_existing | bool
  tags: ['nvim', 'backup']

# ============================================================================
# Step 3: Install Prerequisites (Core dependencies)
# ============================================================================
- name: "[nvim] Install prerequisites"
  include_tasks: prerequisites.yml
  when: nvim_install_core_deps | bool or nvim_install_astronvim_deps | bool
  tags: ['nvim', 'prerequisites']

# ============================================================================
# Step 4: Install Neovim
# ============================================================================
- name: "[nvim] Install Neovim"
  include_tasks: neovim.yml
  when: nvim_install_neovim | bool
  tags: ['nvim', 'neovim']

# ============================================================================
# Step 5: Install Optional Dependencies
# ============================================================================
- name: "[nvim] Install optional dependencies"
  include_tasks: optional-deps.yml
  when: >
    nvim_install_clipboard | bool or
    nvim_install_lazygit | bool or
    nvim_install_gdu | bool or
    nvim_install_bottom | bool or
    nvim_install_treesitter_cli | bool or
    nvim_install_python_provider | bool or
    nvim_install_terminator | bool
  tags: ['nvim', 'optional-deps']

# ============================================================================
# Step 6: Install AstroNvim Configuration
# ============================================================================
- name: "[nvim] Install AstroNvim configuration"
  include_tasks: astronvim.yml
  tags: ['nvim', 'astronvim']
